<div class="container">
  <h1>Hello <%= @user.first_name %>,</h1>

  <p>These are your upcoming bookings:</p>
  <div class="bookings-index d-flex flex-column align-items-center p-0">
    <% @bookings.each do |booking| %>
      <% cafe = booking.booked_hours.first.hourly_slot.cafe %>
      <% if booking.date >= Date.today %>
        <% if booking.start_time > 12 %>
            <% start_time_string = "#{booking.start_time - 12}.00pm" %>
          <% elsif booking.start_time < 12 %>
            <% start_time_string = "#{booking.start_time}.00am" %>
          <% else %>
            <% start_time_string = "#{booking.start_time}.00pm" %>
          <% end %>

          <% time_end = booking.start_time + booking.duration %>

          <% if time_end > 12 %>
            <% end_time_string = "#{time_end - 12}.00pm" %>
          <% elsif time_end < 12 %>
            <% end_time_string = "#{time_end}.00am" %>
          <% else %>
            <% end_time_string = "#{time_end}.00pm" %>
          <% end %>

        <div class="card" style="width: 100%;">
          <img class="card-img-top" src="https://source.unsplash.com/1600x900/?<%= cafe.tags.first.name %>, cafe" alt="Card image cap">
          <div class="card-body">
            <p class="card-text cafe-title"><%= "#{cafe.name}" %></p>
            <div class="card-date-time d-flex justify-content-between align-items-center">
              <p class="card-title card-date"><%= booking.date.strftime("%b %d") %></p>
              <p class="card-text cafe-time"><%= "#{start_time_string} - #{end_time_string}" %></p>
            </div>
            <p class="card-text cafe-address"><%= "Address: #{cafe.address}" %></p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>

  <h2>Booking history</h2>
</div>
